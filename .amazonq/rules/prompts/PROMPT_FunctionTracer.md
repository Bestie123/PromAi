# –ü–†–û–ú–ü–¢: FunctionTracer

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ü—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π
- –ü—Ä–∏ –ø–æ–∏—Å–∫–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç –≤ –∫–æ–¥–µ
- –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:
- –ú–æ–¥—É–ª—å –∏ —Ñ—É–Ω–∫—Ü–∏—è
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–º—Å)
- Timestamp
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
```javascript
// –í –Ω–∞—á–∞–ª–µ —Ä–∞–±–æ—Ç—ã
window.functionTracer.enable();
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è
```javascript
// –ü—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
// –í—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
const trace = window.functionTracer.getTrace();

// –§–∏–ª—å—Ç—Ä –ø–æ –º–æ–¥—É–ª—é
const dataTrace = window.functionTracer.filterByModule('MODULE_DataManager_VER_1.0');

// –§–∏–ª—å—Ç—Ä –ø–æ —Ñ—É–Ω–∫—Ü–∏–∏
const saveTrace = window.functionTracer.filterByFunction('FUNC_saveToLocalStorage_002');

// –°–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã
const slowest = window.functionTracer.getSlowest(10);

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
const stats = window.functionTracer.getStats();
```

### –®–∞–≥ 4: –≠–∫—Å–ø–æ—Ä—Ç
```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON
const json = window.functionTracer.export();
console.log(json);

// –ò–ª–∏ —á–µ—Ä–µ–∑ Inspector (F2 ‚Üí –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ ‚Üí –≠–∫—Å–ø–æ—Ä—Ç)
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ù–∞–π—Ç–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```javascript
// –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
window.functionTracer.enable();

// –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
await authManager.loadFromGitHub();

// –ü–æ–ª—É—á–∏—Ç—å —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ
const slowest = window.functionTracer.getSlowest(5);
slowest.forEach(entry => {
    console.log(`${entry.functionId}: ${entry.duration}ms`);
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// FUNC_loadFromGitHub_004: 1250ms
// FUNC_mergeData_012: 45ms
// FUNC_renderAccordion_002: 23ms
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤
```javascript
// –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
window.functionTracer.enable();

// –†–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º 5 –º–∏–Ω—É—Ç

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
const stats = window.functionTracer.getStats();
console.log('–°–∞–º–∞—è –≤—ã–∑—ã–≤–∞–µ–º–∞—è:', stats.mostCalled);
console.log('–í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤:', stats.totalCalls);
console.log('–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è:', stats.averageDuration);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// –°–∞–º–∞—è –≤—ã–∑—ã–≤–∞–µ–º–∞—è: FUNC_saveToLocalStorage_002 (47 —Ä–∞–∑)
// –í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤: 342
// –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: 2.3ms
```

### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
```javascript
// –í–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
window.functionTracer.enable();

// –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
dataManager.addTechnology();

// –§–∏–ª—å—Ç—Ä –ø–æ –º–æ–¥—É–ª—é
const trace = window.functionTracer.filterByModule('MODULE_DataManager_VER_1.0');
trace.forEach(entry => {
    console.log(`${entry.functionId} ‚Üí ${entry.duration}ms`);
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
// FUNC_addTechnology_005 ‚Üí 1.2ms
// FUNC_saveToLocalStorage_002 ‚Üí 3.5ms
// FUNC_renderAccordion_002 ‚Üí 12.3ms
```

## API Reference

### functionTracer.enable()
–í–∫–ª—é—á–∞–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** void

### functionTracer.disable()
–í—ã–∫–ª—é—á–∞–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** void

### functionTracer.log(moduleId, functionId, duration, params)
–õ–æ–≥–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `moduleId` (string) - MODULE_*_VER_*
- `functionId` (string) - FUNC_*_###
- `duration` (number) - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º—Å
- `params` (object) - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** void

### functionTracer.getTrace()
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Array<TraceEntry>

### functionTracer.filterByModule(moduleId)
–§–∏–ª—å—Ç—Ä –ø–æ –º–æ–¥—É–ª—é

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `moduleId` (string) - MODULE_*_VER_*

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Array<TraceEntry>

### functionTracer.filterByFunction(functionId)
–§–∏–ª—å—Ç—Ä –ø–æ —Ñ—É–Ω–∫—Ü–∏–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `functionId` (string) - FUNC_*_###

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Array<TraceEntry>

### functionTracer.getSlowest(count)
–ü–æ–ª—É—á–∏—Ç—å —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `count` (number) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Array<TraceEntry>

### functionTracer.getStats()
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Object
```javascript
{
    totalCalls: 342,
    averageDuration: 2.3,
    mostCalled: 'FUNC_saveToLocalStorage_002',
    slowest: 'FUNC_loadFromGitHub_004'
}
```

### functionTracer.clear()
–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** void

### functionTracer.export()
–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç  
**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** string (JSON)

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/modules/FunctionTracer.js` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
- `src/modules/Inspector.js` - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
- `trace_log.json` - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (LAYER_1_CORE)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Inspector

FunctionTracer –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Inspector –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:

1. –û—Ç–∫—Ä—ã—Ç—å Inspector (F2)
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞"
3. –í–∫–ª—é—á–∏—Ç—å "üìä –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞"
4. –í–∏–¥–µ—Ç—å –≤—ã–∑–æ–≤—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç (üíæ –≠–∫—Å–ø–æ—Ä—Ç)

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **Circular buffer:** 1000 –∑–∞–ø–∏—Å–µ–π (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞)
- **Overhead:** ~0.1ms –Ω–∞ –≤—ã–∑–æ–≤
- **–ü–∞–º—è—Ç—å:** ~100KB –¥–ª—è 1000 –∑–∞–ø–∏—Å–µ–π
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–°–∏–º–ø—Ç–æ–º:** getTrace() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã–∑–≤–∞–ª–∏ enable()

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π
**–°–∏–º–ø—Ç–æ–º:** –ë—Ä–∞—É–∑–µ—Ä —Ç–æ—Ä–º–æ–∑–∏—Ç  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ clear()

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ –≤–∏–¥–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
**–°–∏–º–ø—Ç–æ–º:** duration –≤—Å–µ–≥–¥–∞ 0  
**–†–µ—à–µ–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ (<1ms)

## –°–º. —Ç–∞–∫–∂–µ
- [Inspector_GUIDE.md](../../docs/Inspector_GUIDE.md) - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
- [FunctionRegistry_GUIDE.md](../../docs/FunctionRegistry_GUIDE.md) - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤—ã–∑–æ–≤–æ–≤
